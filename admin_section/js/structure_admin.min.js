function saswp_schema_datepicker(){jQuery(".saswp-datepicker-picker").length>0&&jQuery(".saswp-datepicker-picker").datepicker({dateFormat:"yy-mm-dd"})}function saswp_select2(){var e=jQuery(".saswp-select2");e.length>0&&jQuery(e).each(function(e,t){var a=jQuery(this),s=jQuery("option[value]:not([selected])",a),n=[];s.each(function(){var e=jQuery(this);n.push({id:e.attr("value"),text:e.text()})});var i=a.attr("data-type"),l=ajaxurl+"?action=saswp_get_select2_data&saswp_security_nonce="+saswp_localize_data.saswp_security_nonce+"&type="+i;a.select2({ajax:{url:l,delay:250,cache:!1},minimumInputLength:2,minimumResultsForSearch:50,dataAdapter:jQuery.fn.select2.amd.require("select2/data/extended-ajax"),defaultResults:n})})}var clone=function(){jQuery(".structured-clone").off("click").click(function(){var e=jQuery(this).closest(".saswp-placement-group").attr("data-id"),t=jQuery(document).find("#call_html_template_sdwp").html();nextId=jQuery(this).parents("tbody").find("tr").length,t=(t=t.replace(/\[0\]/g,"["+nextId+"]")).replace(/\[group-0\]/g,"[group-"+e+"]"),jQuery(this).parents("tr").after(t),removeHtml(),clone(),saswp_select2(),saswp_schema_datepicker()})},removeHtml=function(){jQuery(".structured-delete").off("click").click(function(){1==jQuery(".saswp-placement-group").length?jQuery(this).parents("tbody").find("tr").length>1&&jQuery(this).parents("tr").remove():1==jQuery(this).parents("tbody").find("tr").length?jQuery(this).parents(".saswp-placement-group").remove():jQuery(this).parents("tr").remove()})};function taxonomyDataCall(){jQuery("select.ajax-output").change(function(){if("ef_taxonomy"==jQuery(this).closest("tr").find(".select-post-type").val()){parentSelector=jQuery(this).parents("td").find(".insert-ajax-select");var e=jQuery(this).val(),t=jQuery(this).attr("name").split("[")[1].replace("]",""),a=jQuery("#saswp_select_name_nonce").val();parentSelector.find(".ajax-output-child").remove(),parentSelector.find(".spinner").attr("style","visibility:visible"),parentSelector.children(".spinner").addClass("show");var s=saswp_localize_data.ajax_url,n=jQuery(this).closest(".saswp-placement-group").attr("data-id");jQuery.ajax({url:s,method:"POST",data:{action:"create_ajax_select_sdwp_taxonomy",id:e,number:t,group_number:n,saswp_call_nonce:a},beforeSend:function(){},success:function(e){parentSelector.find(".ajax-output-child").remove(),parentSelector.find(".select2-container").next().remove(),parentSelector.children(".spinner").removeClass("show"),parentSelector.find(".spinner").attr("style","visibility:hidden").hide(),parentSelector.append(e),saswp_select2(),saswp_schema_datepicker()},error:function(e){console.log("Failed Ajax Request"),console.log(e)}})}})}jQuery(document).ready(function(e){e("#saswp-dayofweek-opens-time").timepicker({timeFormat:"H:i:s"}),e("#saswp-dayofweek-closes-time").timepicker({timeFormat:"H:i:s"}),e(".saswp-placement-or-group").on("click",function(t){t.preventDefault();var a="",a=e(".saswp-placement-group").length,s=jQuery(document).find("#call_html_template_sdwp").html();s=s.replace(/\[group-0\]/g,"[group-"+a+"]");var n="";n+='<table class="widefat saswp-placement-table" style="border:0px;">',n+=s,n+="</table>";var i="";i+='<div class="saswp-placement-group" name="data_group_array['+a+']" data-id="'+a+'">',i+='<span style="margin-left:10px;font-weight:600">Or</span>',i+=n,i+="</div>",e(".saswp-placement-group[data-id="+(a-1)+"]").after(i),a++,clone(),removeHtml(),saswp_select2(),saswp_schema_datepicker()});var t=e("#saswp_amp_select").find("table.widefat tr").html();e("body").append("<script type='template/html' id='call_html_template_sdwp'><tr class='toclone cloneya'>"+t+"</tr>"),clone(),removeHtml(),saswp_select2(),saswp_schema_datepicker(),e(document).on("change",".select-post-type",function(){var t=e(this),a=e(this).parents("tr").find(".insert-ajax-select"),s=e(this).val(),n=[1,2,3,4];if("show_globally"!=s){e.each(n,function(a,s){e(t).closest("tr").find("td").eq(s).show()});var i=e(this).attr("class").split(" ")[2],l=jQuery("#saswp_select_name_nonce").val();"date"==s?t.parent().parent().find(".comparison").empty().append('<option class="pt-child" value="before_published"> Before Published </option><option class="pt-child" value="after_published" selected=""> After Published </option>'):t.parent().parent().find(".comparison").empty().append('<option class="pt-child" value="equal"> Equal to </option><option class="pt-child" value="not_equal" selected=""> Not Equal to (Exclude) </option>'),a.find(".ajax-output").remove(),a.find(".select2-container").remove(),a.find(".ajax-output-child").remove(),a.find(".spinner").attr("style","visibility:visible"),a.children(".spinner").addClass("show");var r=saswp_localize_data.ajax_url,c=jQuery(this).closest(".saswp-placement-group").attr("data-id");e.ajax({url:r,method:"POST",data:{action:"create_ajax_select_sdwp",id:s,number:i,group_number:c,saswp_call_nonce:l},beforeSend:function(){},success:function(e){a.find(".ajax-output").remove(),a.find(".select2-container").remove(),a.children(".spinner").removeClass("show"),a.find(".spinner").attr("style","visibility:hidden").hide(),a.append(e),taxonomyDataCall(),saswp_select2(),saswp_schema_datepicker(),a.find(".ajax-output").change()},error:function(e){console.log("Failed Ajax Request"),console.log(e)}})}else e.each(n,function(a,s){e(t).closest("tr").find("td").eq(s).hide()})}),taxonomyDataCall(),e("#notAccessibleForFree").click(function(){e(this).is(":checked")?(e("#paywall_class_name").parents("tr").show(),e("#isAccessibleForFree").parents("tr").show()):(e("#paywall_class_name").parents("tr").hide(),e("#isAccessibleForFree").parents("tr").hide())})});